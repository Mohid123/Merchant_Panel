<app-test></app-test>

<!-- <app-profile-slider [activePane]="isLeftVisible ? 'left' : 'right'"> -->
  <div class="card" *ngIf="isLeftVisible == true">
    <span class="business-header">Profile</span>
    <span class="secondary-title">How do you want to appear?</span>

    <div *ngIf="imagesEditable == false" class="flex justify-end central">
      <button [ngClass]="isEditBusinessHours ? 'opacity-60 cursor-not-allowed': 'opacity-100 cursor-pointer'" type="button" class="edit-button" [disabled]="isEditBusinessHours" (click)="isLeftVisible = false;">Edit</button>
    </div>

    <div *ngIf="imagesEditable == true" class="flex justify-end pb-2 pr-20 mt-6 mb-2 mr-1 3xl:pr-32">
      <button [ngClass]="(uploadingMultipleImages == true || uploadingSingleImage == true) ? 'opacity-50 cursor-not-allowed': 'opacity-100 cursor-pointer'" [disabled]="uploadingMultipleImages == true || uploadingSingleImage == true" type="button" class="discard-button" (click)="discardChanges()">Discard</button>
      <button
        [ngClass]="(uploadingMultipleImages == true || uploadingSingleImage == true) ? 'opacity-50 cursor-not-allowed': 'opacity-100 cursor-pointer'"
        [disabled]="uploadingMultipleImages == true || uploadingSingleImage == true"
        type="submit"
        class="save-button"
        (click)="submitImagesForImageCase()">
        <ng-container *ngIf="uploaded == false">
          <span class="text-xs indicator-progress" [style.display]="'block'">
            Saving...
            <span class="w-3 h-3 align-middle spinner-border spinner-border-sm"></span>
          </span>
        </ng-container>
        <ng-container *ngIf="uploaded == true">
          <span class="indicator-label">Save</span>
        </ng-container>
      </button>
    </div>

    <div *ngIf="imagesEditable == true" class="flex justify-center mt-2">
      <img class="my-img" src="../../../assets/media/logos/Line-dash.svg">
    </div>

    <table class="datatable-table">
      <tbody class="datatable-body">
        <ng-container *ngIf="(authService.currentUser$ | async) as user">
          <tr>
            <td class="w-0 pb-5">
              <span class="spanner">Trade name</span>
            </td>
            <td class="w-0 pb-5">
              <span class="naming">{{user?.personalDetail?.tradeName}}</span>
            </td>
          </tr>
          <tr>
            <td class="w-0 pb-5">
              <span class="spanner">Street address</span>
            </td>
            <td class="w-0 pb-5">
              <span class="naming">{{user?.personalDetail?.streetAddress}}</span>
            </td>
          </tr>
          <tr>
            <td class="w-0 pb-5">
              <span class="spanner">Zip code</span>
            </td>
            <td class="w-0 pb-5">
              <span class="naming">{{user?.personalDetail?.zipCode}}</span>
            </td>
          </tr>
          <tr>
            <td class="w-0 pb-5">
              <span class="spanner">City</span>
            </td>
            <td class="w-0 pb-5">
              <span class="naming">{{user?.personalDetail?.city}}</span>
            </td>
          </tr>
          <tr>
            <td class="w-0 pb-5">
              <span class="spanner">Google map pin</span>
            </td>
            <td class="w-0 pb-5">
              <span class="naming">{{user?.personalDetail?.googleMapPin | truncation: 70}}</span>
            </td>
          </tr>
          <tr>
            <td class="w-0 pb-24">
              <span class="spanner">Profile picture</span>
            </td>
            <ng-container *ngIf="!image && uploadingSingleImage == false">
              <td class="w-0 pb-5 image-input image-input-outline image-upload">
                <div class="object-cover image-input-wrapper smaller-image">
                  <label class="absolute top-0 w-20 h-20 btn btn-xs btn-icon btn-hover-text-primary">
                    <span class="absolute top-0 flex items-center justify-center w-20 h-20"><img class="object-contain w-14 h-14" src="../../../assets/media/logos/active.svg"></span>
                    <input class="absolute top-0 w-20 h-20 cursor-pointer" type="file" accept=".png, .jpg, .jpeg" (change)="onSelectSingle($event)">
                  </label>
                </div>
            </ng-container>
            <ng-container *ngIf="!image && uploadingSingleImage == true">
              <td class="w-0 pb-5 image-input image-input-outline image-upload">
                <div class="object-cover ml-2 image-input-wrapper smaller-image">
                  <div class="flex flex-col items-center justify-center pt-6 align-middle">
                    <span class="indicator-progress" [style.display]="'block'">
                      <span style="width: 2rem; height: 2rem;" class="text-xl align-middle spinner-border spinner-border-sm ms-2"></span>
                    </span>
                  </div>
                </div>
            </ng-container>
            <ng-container *ngIf="image">
              <td class="image-input image-input-outline">
                <app-main-blur-hash class="object-cover border-2 border-gray-500 rounded-xl w-85px h-90px" [imageSrc]="image+'?size=142'" [blurHash]="imageBlurHash"></app-main-blur-hash>
                <label class="z-50 mt-1 bg-gray-500 shadow btn btn-icon btn-circle btn-active-color-primary w-20px h-20px" data-kt-image-input-action="change">
                  <i class="bi bi-x fs-4" style="color: white;"></i>
                  <input (click)="clearImage()" type="reset" name="avatar" accept=".png, .jpg, .jpeg" multiple>
                  <input type="hidden" name="avatar_remove">
                </label>
              </td>
            </ng-container>
            <!-- <td class="w-0 pb-5 image-input image-input-outline image-upload">
              <div class="image-input-wrapper smaller-image">
                <label class="absolute top-0 w-20 h-20 btn btn-xs btn-icon btn-hover-text-primary">
                  <span class="absolute top-0 flex items-center justify-center w-20 h-20"><img class="object-contain w-14 h-14" src="../../../assets/media/logos/inactive.svg"></span>
                  <input disabled class="absolute top-0 w-20 h-20 cursor-not-allowed" type="file" accept=".png, .jpg, .jpeg" multiple>
                </label>
              </div>
              <div class="flex flex-row mt-3 w-60">
                <span class="text-xs font-thin text-gray-500">Supported file types png, jpeg</span>
              </div>
            </td> -->
          </tr>
          <tr>
            <td class="w-0 pb-5">
              <span class="spanner">Website or social media url</span>
            </td>
            <td class="w-0 pb-5">
              <span class="naming">{{user.website_socialAppLink | truncation: 70}}</span>
            </td>
          </tr>
          <tr>
            <td class="w-0 pb-52">
              <span class="mr-20 spanner">Gallery</span>
            </td>
            <td class="w-0 pb-5">
              <div (files)="onSelectFile($event, true)" appDragAnDropUpload class="rounded-xl w-80 max-w-100 min-h-43 large-image">
                <div *ngIf="urls.length == 0 && uploadingMultipleImages == false" class="flex flex-col justify-center h-full">
                  <div class="self-center mt-6 mb-3 image-input image-input-outline image-upload">
                    <div class="w-18 h-18 image-input-wrapper" style="box-shadow: none;  opacity: 0.8;"></div>
                    <label class="absolute top-0 w-18 h-18 btn btn-xs btn-icon btn-hover-text-primary">
                      <span class="absolute flex items-center justify-center h-24 top-3 w-26" style="color: rgb(179, 179, 179);">
                        <img class="h-24 w-26" src="../../../assets/media/logos/active.svg">
                      </span>
                      <input #imgInput class="absolute top-0 cursor-pointer w-18 h-18 " type="file" accept=".png, .jpg, .jpeg" (change)="onSelectFile($event, true)" multiple>
                    </label>
                  </div>
                </div>

                <div *ngIf="uploadingMultipleImages == true && urls.length == 0">
                  <div class="mt-1 image-input image-input-outline image-upload">
                    <div class="object-cover w-16 h-16 ml-1 small-image image-input-wrapper">
                      <label class="absolute top-0 w-14 h-14 btn btn-xs btn-icon btn-hover-text-primary">
                        <span class="absolute top-0 flex items-center justify-center w-14 h-14">
                          <div class="flex flex-col items-center justify-center mt-2 align-middle">
                            <span class="indicator-progress" [style.display]="'block'">
                              <span style="width: 1.5rem; height: 1.5rem;" class="text-xl align-middle spinner-border spinner-border-sm ms-2"></span>
                            </span>
                          </div>
                        </span>
                      </label>
                    </div>
                  </div>
                </div>

                <div cdkDropListGroup class="px-3 py-1 overflow-hidden 2xl:p-3 md:max-h-40 md:overflow-y-auto 2xl:max-h-full" data-max-image="5" *ngIf="urls.length > 0">
                  <div id="drop-list-main" class="flex flex-wrap w-full h-full" data-max-image="5" *ngIf="urls.length > 0">
                    <ng-container *ngIf="urls && urls.length > 0">
                      <div fxLayout="row" *ngFor="let itemsRow of getItemsTable(); let j = index" cdkDropList
                        cdkDropListOrientation="horizontal" [id]="'DropZone'+j" [ngClass]="{'2xl:h-18 overflow-hidden dropZone_Reorder': true}"  [cdkDropListData]="itemsRow"
                        (cdkDropListDropped)="reorderDroppedItem($event,j)">
                        <ng-container *ngFor="let media of itemsRow; let i = index; last as last; first as first">
                          <div cdkDrag class="relative" [class.lastindex]="last && dragIndex !=j" (cdkDragStarted)="onDragStartedDropZone(j,i)">
                            <div class="drag-placeholder" [ngStyle]="{'width': last && dragIndex !=j ? '0 !important' : '' }" style="" *cdkDragPlaceholder></div>
                            <app-main-blur-hash [imageSrc]="media.captureFileURL+'?size=142'" [blurHash]="media.blurHash" class="w-16 h-16 m-1 rounded-lg 2xl:m-1"></app-main-blur-hash>
                            <i class="absolute top-0 right-0 bg-white rounded-full cursor-pointer fa fa-times-circle" (click)="clearImageDrag(j,i)"></i>
                          </div>
                        </ng-container>
                      </div>
                      <div *ngIf="uploadingMultipleImages == true && urls.length >= 0" class="image-input image-upload">
                        <div class="object-cover w-16 h-16 mt-1 ml-1 small-image image-input-wrapper">
                          <label class="absolute top-0 w-14 h-14 btn btn-xs btn-icon btn-hover-text-primary">
                            <span class="absolute top-0 flex items-center justify-center w-14 h-14">
                              <div class="flex flex-col items-center justify-center align-middle mt-2.5">
                                <span class="indicator-progress" [style.display]="'block'">
                                  <span style="width: 1.5rem; height: 1.5rem;" class="text-xl align-middle spinner-border spinner-border-sm ms-2"></span>
                                </span>
                              </div>
                            </span>
                          </label>
                        </div>
                      </div>
                    </ng-container>

                    <div *ngIf="urls.length < 5" class="relative">
                      <div class="w-16 h-16 image-input-wrapper" style="box-shadow: none;  opacity: 0.8;"></div>
                      <label class="absolute top-0 w-16 h-16 btn btn-xs btn-icon btn-hover-text-primary">
                        <span class="absolute top-0 flex items-center justify-center w-16 h-16 m-1 ml-2 2xl:m-1 2xl:ml-2" style="color: rgb(179, 179, 179); font-size: 30px"><img class="w-14 h-14 2xl:h-16 2xl:w-16" src="../../../assets/media/logos/active.svg"></span>
                        <input class="absolute top-0 w-16 h-16 m-1 ml-2 cursor-pointer 2xl:m-1 2xl:ml-2" type="file" accept=".png, .jpg, .jpeg" (change)="onSelectFile($event,true)" (click)="onClick($event)" multiple>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
              <span class="text-xs font-thin text-gray-500">Upload maximum 5 images</span>
            </td>
          </tr>
        </ng-container>
      </tbody>
    </table>

  </div>

  <div class="card card-right" *ngIf="isLeftVisible == false">
    <span class="business-header">Profile</span>
    <span class="secondary-title">How do you want to appear?</span>

    <div class="flex justify-end pb-2 pr-20 mt-6 mb-2 mr-1 3xl:pr-32">
      <button [ngClass]="(uploadingMultipleImages == true || uploadingSingleImage == true) ? 'opacity-50 cursor-not-allowed': 'opacity-100 cursor-pointer'" [disabled]="uploadingMultipleImages == true || uploadingSingleImage == true" type="button" class="discard-button" (click)="discardChanges()">Discard</button>
      <button
      [ngClass]="(uploadingMultipleImages == true || uploadingSingleImage == true) ? 'opacity-50 cursor-not-allowed': 'opacity-100 cursor-pointer'"
      [disabled]="uploadingMultipleImages == true || uploadingSingleImage == true"
      type="submit"
      class="save-button"
      (click)="submitProfileChanges();
      submitImages()">
      <ng-container *ngIf="uploaded == false">
        <span class="text-xs indicator-progress" [style.display]="'block'">
          Saving...
          <span class="w-3 h-3 align-middle spinner-border spinner-border-sm"></span>
        </span>
      </ng-container>
      <ng-container *ngIf="uploaded == true">
        <span class="indicator-label">Save</span>
      </ng-container>
    </button>
    </div>

    <div class="flex justify-center mt-2">
      <img class="my-img" src="../../../assets/media/logos/Line-dash.svg">
    </div>

    <table class="datatable-table">
      <tbody class="datatable-body" [formGroup]="profileForm">
        <tr>
          <td class="pb-5">
            <span class="spanner">Trade name</span>
          </td>
          <td class="pb-5">
            <input class="form-control" formControlName="tradeName" maxlength="35">
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'required',
              message: 'Trade name is required',
              control: profileForm.controls['tradeName']
            }">
            </ng-container>
          </td>
        </tr>
        <tr>
          <td class="pb-5">
            <span class="spanner">Street address</span>
          </td>
          <td class="pb-5">
            <input class="form-control" formControlName="streetAddress" maxlength="45">
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'required',
              message: 'Street address is required',
              control: profileForm.controls['streetAddress']
            }">
            </ng-container>
          </td>
        </tr>
        <tr>
          <td class="pb-5">
            <span class="spanner">Zip code</span>
          </td>
          <td class="pb-5">
            <input appNumbersOnly class="form-control" formControlName="zipCode" maxlength="4">
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'required',
              message: 'Zip code is required',
              control: profileForm.controls['zipCode']
            }">
            </ng-container>
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'zipInvalid',
              message: 'Zip code is invalid',
              control: profileForm.controls['zipCode']}">
            </ng-container>
          </td>
        </tr>
        <tr>
          <td class="pb-5">
            <span class="spanner">City</span>
          </td>
          <td class="pb-4">
            <input class="form-control" formControlName="city" maxlength="30">
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'required',
              message: 'City is required',
              control: profileForm.controls['city']
            }">
            </ng-container>
          </td>
        </tr>
        <tr>
          <td class="pb-5">
            <span class="spanner">Google map pin</span>
          </td>
          <td class="pb-4">
            <input class="form-control" formControlName="googleMapPin">
            <!-- <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'required',
              message: 'Google map pin required',
              control: profileForm.controls['googleMapPin']
            }">
            </ng-container> -->
            <!-- <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'invalidPin',
              message: 'Google map pin is invalid',
              control: profileForm.controls['googleMapPin']}">
            </ng-container> -->
          </td>
        </tr>
        <tr>
          <td class="w-0 pb-24">
            <span class="spanner">Profile picture</span>
          </td>
          <ng-container *ngIf="!image && uploadingSingleImage == false">
            <td class="w-0 pb-5 image-input image-input-outline image-upload">
              <div class="object-cover image-input-wrapper smaller-image">
                <label class="absolute top-0 w-20 h-20 btn btn-xs btn-icon btn-hover-text-primary">
                  <span class="absolute top-0 flex items-center justify-center w-20 h-20"><img class="object-contain w-14 h-14" src="../../../assets/media/logos/active.svg"></span>
                  <input class="absolute top-0 w-20 h-20 cursor-pointer" type="file" accept=".png, .jpg, .jpeg" (change)="onSelectSingle($event)">
                </label>
              </div>
          </ng-container>
          <ng-container *ngIf="!image && uploadingSingleImage == true">
            <td class="w-0 pb-5 image-input image-input-outline image-upload">
              <div class="object-cover ml-2 image-input-wrapper smaller-image">
                <div class="flex flex-col items-center justify-center pt-6 align-middle">
                  <span class="indicator-progress" [style.display]="'block'">
                    <span style="width: 2rem; height: 2rem;" class="text-xl align-middle spinner-border spinner-border-sm ms-2"></span>
                  </span>
                </div>
              </div>
          </ng-container>
          <ng-container *ngIf="image">
            <td class="image-input image-input-outline">
              <app-main-blur-hash class="object-cover border-2 border-gray-500 rounded-xl w-85px h-90px" [imageSrc]="image" [blurHash]="imageBlurHash"></app-main-blur-hash>
              <label class="z-50 mt-1 bg-gray-500 shadow btn btn-icon btn-circle btn-active-color-primary w-20px h-20px" data-kt-image-input-action="change">
                <i class="bi bi-x fs-4" style="color: white;"></i>
                <input (click)="clearImage()" type="reset" name="avatar" accept=".png, .jpg, .jpeg" multiple>
                <input type="hidden" name="avatar_remove">
              </label>
            </td>
          </ng-container>
            <div class="flex flex-row mt-3 w-60">
              <span class="text-xs font-thin text-gray-500">Supported file types png, jpeg</span>
            </div>
          </tr>
        <tr>
          <td class="w-0 pb-5">
            <span class="spanner">Website or social media url</span>
          </td>
          <td class="w-0 pb-5">
            <input class="form-control" formControlName="website_socialAppLink">
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'required',
              message: 'Website is required',
              control: profileForm.controls['website_socialAppLink']
            }">
            </ng-container>
            <div class="text-xs text-danger"
                *ngIf="profileForm.controls['website_socialAppLink']?.errors?.['invalidUrl']">
                Url is Invalid
            </div>
          </td>
        </tr>
        <tr>
          <td class="w-0 pb-52">
            <span class="mr-20 spanner">Gallery</span>
          </td>
          <td class="w-0 pb-5">
            <div (files)="onSelectFile($event, true)" appDragAnDropUpload class="rounded-xl w-80 max-w-100 min-h-43 large-image">
                <div *ngIf="urls.length == 0 && uploadingMultipleImages == false" class="flex flex-col justify-center h-full">
                  <div class="self-center mt-6 mb-3 image-input image-input-outline image-upload">
                    <div class="w-18 h-18 image-input-wrapper" style="box-shadow: none;  opacity: 0.8;"></div>
                    <label class="absolute top-0 w-18 h-18 btn btn-xs btn-icon btn-hover-text-primary">
                      <span class="absolute flex items-center justify-center h-24 top-3 w-26" style="color: rgb(179, 179, 179);">
                        <img class="h-24 w-26" src="../../../assets/media/logos/active.svg">
                      </span>
                      <input #imgInput class="absolute top-0 cursor-pointer w-18 h-18 " type="file" accept=".png, .jpg, .jpeg" (change)="onSelectFile($event, true)" multiple>
                    </label>
                  </div>
                </div>

                <div *ngIf="uploadingMultipleImages == true && urls.length == 0">
                  <div class="mt-1 image-input image-input-outline image-upload">
                    <div class="object-cover w-16 h-16 mt-1 ml-1 small-image image-input-wrapper">
                      <label class="absolute top-0 w-14 h-14 btn btn-xs btn-icon btn-hover-text-primary">
                        <span class="absolute top-0 flex items-center justify-center w-14 h-14">
                          <div class="flex flex-col items-center justify-center mt-2 align-middle">
                            <span class="indicator-progress" [style.display]="'block'">
                              <span style="width: 1.5rem; height: 1.5rem;" class="text-xl align-middle spinner-border spinner-border-sm ms-2"></span>
                            </span>
                          </div>
                        </span>
                      </label>
                    </div>
                  </div>
                </div>

                <div cdkDropListGroup class="px-3 py-1 overflow-hidden 2xl:p-3 md:max-h-40 md:overflow-y-auto 2xl:max-h-full" data-max-image="5" *ngIf="urls.length > 0">
                  <div id="drop-list-main" class="flex flex-wrap w-full h-full" data-max-image="5" *ngIf="urls.length > 0">
                    <ng-container *ngIf="urls && urls.length > 0">
                      <div fxLayout="row" *ngFor="let itemsRow of getItemsTable(); let j = index" cdkDropList
                        cdkDropListOrientation="horizontal" [id]="'DropZone'+j" [ngClass]="{'2xl:h-18 overflow-hidden dropZone_Reorder': true}"  [cdkDropListData]="itemsRow"
                        (cdkDropListDropped)="reorderDroppedItem($event,j)">
                        <ng-container *ngFor="let media of itemsRow; let i = index; last as last; first as first">
                          <div cdkDrag class="relative" [class.lastindex]="last && dragIndex !=j" (cdkDragStarted)="onDragStartedDropZone(j,i)">
                            <div class="drag-placeholder" [ngStyle]="{'width': last && dragIndex !=j ? '0 !important' : '' }" style="" *cdkDragPlaceholder></div>
                            <app-main-blur-hash [imageSrc]="media.captureFileURL+'?size=142'" [blurHash]="media.blurHash" class="w-16 h-16 m-1 rounded-lg 2xl:m-1"></app-main-blur-hash>
                            <i class="absolute top-0 right-0 bg-white rounded-full cursor-pointer fa fa-times-circle" (click)="clearImageDrag(j,i)"></i>
                          </div>
                        </ng-container>
                      </div>
                      <div *ngIf="uploadingMultipleImages == true && urls.length >= 0" class="image-input image-upload">
                        <div class="object-cover w-16 h-16 mt-1 ml-1 small-image image-input-wrapper">
                          <label class="absolute top-0 w-14 h-14 btn btn-xs btn-icon btn-hover-text-primary">
                            <span class="absolute top-0 flex items-center justify-center w-14 h-14">
                              <div class="flex flex-col items-center justify-center mt-2 align-middle">
                                <span class="indicator-progress" [style.display]="'block'">
                                  <span style="width: 1.5rem; height: 1.5rem;" class="text-xl align-middle spinner-border spinner-border-sm ms-2"></span>
                                </span>
                              </div>
                            </span>
                          </label>
                        </div>
                      </div>
                    </ng-container>

                    <div *ngIf="urls.length < 5" class="relative">
                      <div class="w-16 h-16 image-input-wrapper" style="box-shadow: none;  opacity: 0.8;"></div>
                      <label class="absolute top-0 w-16 h-16 btn btn-xs btn-icon btn-hover-text-primary">
                        <span class="absolute top-0 flex items-center justify-center w-16 h-16 m-1 ml-2 2xl:m-1 2xl:ml-2" style="color: rgb(179, 179, 179); font-size: 30px"><img class="w-14 h-14 2xl:h-16 2xl:w-16" src="../../../assets/media/logos/active.svg"></span>
                        <input class="absolute top-0 w-16 h-16 m-1 ml-2 cursor-pointer 2xl:m-1 2xl:ml-2" type="file" accept=".png, .jpg, .jpeg" (change)="onSelectFile($event,true)" (click)="onClick($event)" multiple>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            <span class="text-xs font-thin text-gray-500">Upload maximum 5 images</span>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- <div class="flex justify-center mt-5">
      <img class="my-img" src="../../../assets/media/logos/Line-dash.svg">
    </div>

    <div class="flex justify-end pb-2 pr-20 mt-3 mb-2 3xl:pr-32">
      <button type="button" class="discard-button" (click)="discardChanges()">Discard</button>
      <button type="submit" class="save-button" (click)="submitProfileChanges()">Save</button>
    </div> -->

  </div>
<!-- </app-profile-slider> -->

<div class="card card-business">

  <div class="py-6 border-0 border-transparent cursor-pointer xl:mx-8 1.7xl:mx-20 3xl:mx-24 card-header">
    <h3 class="flex items-center mt-2 fw-bolder">Set Business Hours</h3>

    <ng-container *ngIf="!isEditBusinessHours">
      <button (click)="editBusinessHours()" [ngClass]="isLeftVisible == false ? 'opacity-60 cursor-not-allowed': 'opacity-100 cursor-pointer'" [disabled]="isLeftVisible == false" class="edit-btn">Edit</button>
    </ng-container>

    <div class="flex justify-end border-none" *ngIf="isEditBusinessHours || (this.isLoading$ | async)">
      <button class="discard-button" routerLinkActive="active" (click)="discardBusinessHours()">Discard</button>
      <button type="button" class="save-button" [disabled]="(isLoading$ | async)" (click)="saveBusinessHours();">
        <ng-container *ngIf="!(isLoading$ | async); else Loading">Save</ng-container>
      </button>
    </div>
  </div>

  <div class="flex justify-center">
    <img class="my-img" src="../../../assets/media/logos/Line-dash.svg">
  </div>

  <div class="pl-0 pr-0 card-body" style="background-color: white;">
    <div class="max-w-full table-responsive">
      <table [formGroup]="businessHoursForm" class="table align-middle table-row-dashed table-row-gray-300 gs-0 gy-4">
        <tbody class="flex flex-col" formArrayName="businessHours" >
          <ng-container *ngFor="let formControls of businessHoursFromControl.controls; let i=index" [formGroupName]="i" >
          <tr class="relative flex items-center justify-center border-0">
            <td class="pl-10 day">
                <div class="text-sm d-flex flex-column">
                    <input type="checkbox" formControlName="isWorkingDay" [id]="formControls.value.day">
                    <label [for]="formControls.value.day">
                      <div>
                        {{formControls.value.day}}
                      </div>
                    </label>
                </div>
                <p class="shope-status" [ngClass]="{'day-off' : !formControls.value.isWorkingDay}">{{formControls.value.isWorkingDay ? 'Opened' : 'Closed'}}</p>
              </td>
            <td class="time">
              <div>
                <input readonly [disabled]="!formControls.value.isWorkingDay || !isEditBusinessHours" [format]="24" [ngxTimepicker]="picker1" class="form-control" placeholder="First start" formControlName="firstStartTime" />
                <ngx-material-timepicker #picker1></ngx-material-timepicker>
              </div>
              <span>&#8212;</span>
              <div>
                <input readonly [disabled]="!formControls.value.isWorkingDay || !isEditBusinessHours" [format]="24" [ngxTimepicker]="picker2" class="form-control" placeholder="First end" formControlName="firstEndTime" />
                <ngx-material-timepicker #picker2></ngx-material-timepicker>
              </div>
            </td>
            <td class="until">
              <span class="flex items-center justify-center text-center">and</span>
            </td>
            <td class="pr-10 time">
              <div>
                <input readonly [disabled]="!formControls.value.isWorkingDay || !isEditBusinessHours" [format]="24" [ngxTimepicker]="picker3" class="form-control" placeholder="Last start" formControlName="secondStartTime" />
                <ngx-material-timepicker [format]="24"  #picker3></ngx-material-timepicker>
              </div>
              <span>&#8212;</span>
              <div>
                <input readonly [disabled]="!formControls.value.isWorkingDay || !isEditBusinessHours" [format]="24" [ngxTimepicker]="picker4" class="form-control" placeholder="Last end" formControlName="secondEndTime" />
                <ngx-material-timepicker #picker4></ngx-material-timepicker>
              </div>
            </td>

          </tr>
          </ng-container>
        </tbody>
      </table>
    </div>

    <div class="py-2 mb-3 xl:ml-16 1.5xl:ml-20 1.7xl:ml-32" style="border-style: none!important;">
        <h3 class="m-0 fw-bolder">About us</h3>
    </div>

    <div class="xl:ml-16 1.5xl:ml-20 1.7xl:ml-32 mr-20">
      <form class="form row" [formGroup]="termsForm">
        <div class="pb-5">
          <ckeditor formControlName="aboutUs" [editor]="Editor" [config]="config"></ckeditor>
        </div>
        <div *ngIf="(aboutUsIsEdited$ | async) == true" class="flex justify-end">
          <button type="button" class="save-button" (click)="saveAboutUs();">
            Save
          </button>
        </div>

        <div class="py-2">
          <h3 class="fw-bolder">Fine print</h3>
        </div>

        <div class="pb-1">
          <ckeditor formControlName="finePrint" [editor]="Editor" [config]="config"></ckeditor>
        </div>
        <div *ngIf="(finePrintIsEdited$ | async) == true" class="flex justify-end pt-3">
          <button type="button" class="save-button" (click)="saveFinePrint();">
            Save
          </button>
        </div>

      </form>
    </div>

  </div>
</div>


<ng-template #formError let-control="control" let-message="message" let-validation="validation">
  <ng-container *ngIf="control.hasError(validation) && (control.dirty || control.touched)">
    <div class="fv-plugins-message-container">
      <div class="ml-2 text-xs fv-help-block">
        {{ message }}
      </div>
    </div>
  </ng-container>
</ng-template>

<ng-template #Loading>
  <span clas="indicator-progress" [style.display]="'block'">
    Saving {{ " " }}
    <span
      class="align-middle spinner-border spinner-border-sm ms-2"
    ></span>
  </span>
</ng-template>

<app-media-progress></app-media-progress>
